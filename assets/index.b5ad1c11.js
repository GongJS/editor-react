var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var j=(e,t,r)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))re.call(t,r)&&j(e,r,t[r]);if(A)for(var r of A(t))ne.call(t,r)&&j(e,r,t[r]);return e},N=(e,t)=>ee(e,te(t));import{r as s,I as oe,_ as L,aa as ue,a3 as y,u as ie,a as f,j as u,M as ae,W as F,B as D,p as se,C as M,L as le,m as w}from"./vendor.f7173d25.js";import{i as I,L as ce}from"./index.5fd53806.js";import{d as pe,e as fe}from"./index.ea8747d7.js";var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},ye=de,k=function(t,r){return s.exports.createElement(oe,L(L({},t),{},{ref:r,icon:ye}))};k.displayName="UserOutlined";var he=s.exports.forwardRef(k),g={};Object.defineProperty(g,"__esModule",{value:!0});g.CopyToClipboard=void 0;var C=U(s.exports),me=U(ue);function U(e){return e&&e.__esModule?e:{default:e}}function v(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(r){return typeof r}:v=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},v(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R(r,!0).forEach(function(n){S(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ce(e,t){if(e==null)return{};var r=ve(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function ve(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t,r){return t&&$(e.prototype,t),r&&$(e,r),e}function _e(e,t){return t&&(v(t)==="object"||typeof t=="function")?t:V(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},P(e)}function V(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return x=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},x(e,t)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e){Fe(t,e);function t(){var r,n;be(this,t);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=_e(this,(r=P(t)).call.apply(r,[this].concat(a))),S(V(n),"onClick",function(h){var c=n.props,m=c.text,p=c.onCopy,b=c.children,O=c.options,d=C.default.Children.only(b),_=(0,me.default)(m,O);p&&p(m,_),d&&d.props&&typeof d.props.onClick=="function"&&d.props.onClick(h)}),n}return Oe(t,[{key:"render",value:function(){var n=this.props;n.text,n.onCopy,n.options;var o=n.children,a=Ce(n,["text","onCopy","options","children"]),l=C.default.Children.only(o);return C.default.cloneElement(l,ge({},a,{onClick:this.onClick}))}}]),t}(C.default.PureComponent);g.CopyToClipboard=W;S(W,"defaultProps",{onCopy:void 0,options:void 0});var De=g,B=De.CopyToClipboard;B.CopyToClipboard=B;var we=B,Pe="/assets/logo2.6b1399ea.png";const q=60,Ae=()=>{const[e]=y.useForm(),t=s.exports.useRef(null),[r,n]=s.exports.useState(!1),[o,a]=s.exports.useState(q),[l,h]=s.exports.useState(!1),[c,m]=s.exports.useState(""),[p,b]=s.exports.useState({value:""}),O=ie(),{mutateAsync:d,isLoading:_}=pe(),{mutateAsync:z,isLoading:G}=fe(),K=i=>I(i==null?void 0:i.trim())?{validateStatus:"success",errorMsg:null}:{validateStatus:"error",errorMsg:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"},H=i=>{b(N(T({},K(i.target.value)),{value:i.target.value}))},J=s.exports.useMemo(()=>{var i;return!I((i=e.getFieldValue("phoneNumber"))==null?void 0:i.trim())||r},[p.value,r]),Q=async()=>{n(!0);const i=await z({phoneNumber:e.getFieldValue("phoneNumber")});setTimeout(()=>{m(i.code),h(!0)},1e3),w.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u6CE8\u610F\u67E5\u6536",5)},X=async i=>{await d(i),w.success("\u767B\u5F55\u6210\u529F 2\u79D2\u540E\u8DF3\u8F6C\u9996\u9875"),setTimeout(()=>{O("/")},2e3)};s.exports.useEffect(()=>{const i=()=>{a(E=>E<=1?(n(!1),clearInterval(t.current),q):E-1)};return r&&(t.current=window.setInterval(i,1e3)),()=>{t.current&&clearInterval(t.current)}},[r]);const Y=()=>{w.success("\u9A8C\u8BC1\u7801\u590D\u5236\u6210\u529F"),h(!1)};return f("div",{className:"login-page",children:[u(ae,{title:"\u9A8C\u8BC1\u7801",visible:l,closable:!1,footer:null,children:f("div",{className:"modal-wrapper",children:[u(F,{readOnly:!0,value:c,disabled:!0}),u(we.CopyToClipboard,{onCopy:Y,text:c,children:u(D,{type:"primary",children:"\u590D\u5236"})})]})}),f(se,{children:[u(M,{span:12,children:u("div",{className:"aside",children:f("div",{className:"aside-inner",children:[u(le,{to:"/setting",children:u("img",{src:Pe,className:"logo-img",alt:""})}),u("h2",{children:"\u8FD9\u662F\u6211\u7528\u8FC7\u7684\u6700\u597D\u7684\u5EFA\u7AD9\u5DE5\u5177"}),u("span",{className:"text-white-70",children:"\u738B\u94C1\u9524, Google"})]})})}),u(M,{span:12,children:f("div",{className:"login-area",children:[u("h2",{children:"\u6B22\u8FCE\u56DE\u6765"}),u("p",{className:"subTitle",children:"\u4F7F\u7528\u624B\u673A\u53F7\u7801\u548C\u9A8C\u8BC1\u7801\u767B\u5F55\u5230\u6155\u8BFE\u4E50\u9AD8"}),f(y,{form:e,layout:"vertical",onFinish:X,children:[u(y.Item,{name:"phoneNumber",validateStatus:p.validateStatus,help:p.errorMsg,children:u(F,{prefix:u(he,{}),placeholder:"\u624B\u673A\u53F7\u7801",value:p.value,onChange:H})}),u(y.Item,{name:"veriCode",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u4E0D\u80FD\u4E3A\u7A7A"},{max:4,message:"\u9A8C\u8BC1\u7801\u4E0D\u80FD\u8D85\u8FC74\u4F4D\u6570"}],children:u(F,{prefix:u(ce,{}),placeholder:"\u56DB\u4F4D\u9A8C\u8BC1\u7801"})}),f(y.Item,{children:[u(D,{type:"primary",htmlType:"submit",loading:_,children:"\u767B\u5F55"}),u(D,{htmlType:"button",onClick:Q,disabled:J,loading:G,children:o===60?"\u83B7\u53D6\u9A8C\u8BC1\u7801":`${o}\u79D2\u540E\u91CD\u53D1`})]})]})]})})]})]})};export{Ae as default};
