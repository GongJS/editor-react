import{u as m,j as e,p as y,C as F,a,q as h,B as d,s as w,D as L,t as W,M as x,b as k,v as g,w as I,L as C,e as f,x as N,S as A,F as S,P as $}from"./vendor.f7173d25.js";import{u as D,a as j}from"./index.ea8747d7.js";import{u as E,a as P,b as M,c as z,d as T,l as H}from"./logo-simple.54deed43.js";const{Meta:O}=h,R=({list:i})=>{const c=m(),{mutateAsync:l}=E(),r=async t=>{const o=await l(t.toString());o.errno===0&&c(`/editor/${o.data.id}`)};return e("div",{className:"template-list-component",children:e(y,{gutter:16,children:i.map(t=>e(F,{span:6,className:"poster-item",children:a(h,{hoverable:!0,children:[a("div",{className:"img-wrapper",children:[t.coverImg?e("img",{src:t.coverImg,alt:""}):e("img",{src:"http://typescript-vue.oss-cn-beijing.aliyuncs.com/vue-marker/5f81cca3f3bf7a0e1ebaf885.png",alt:""}),e("div",{className:"hover-item",onClick:()=>r(t.id),children:e(d,{size:"large",type:"primary",children:"\u4F7F\u7528\u8BE5\u6A21\u7248\u521B\u5EFA"})})]}),e(O,{title:t.title,description:a("div",{className:"description-detail",children:[a("span",{children:[" ","\u4F5C\u8005\uFF1A",t.author]}),e("span",{className:"user-number",children:t.copiedCount})]})})]})},t.id))})})};const{Meta:G}=h,J=({list:i})=>{const c=m(),{mutateAsync:l}=E(),{mutateAsync:r}=P(),t=async s=>{const n=await l(s);c(`/editor/${n.id}`)},o=s=>{c(`/editor/${s}`)},u=s=>{x.confirm({title:"\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u4F5C\u54C1\u5417\uFF1F",okText:"\u5220\u9664",okType:"danger",cancelText:"\u53D6\u6D88",onOk:async()=>{await r(s)}})};return e("div",{className:"work-list-component",children:e(y,{gutter:16,children:i.map(s=>e(F,{span:6,className:"poster-item",children:a(h,{hoverable:!0,children:[a("div",{className:"img-wrapper",children:[s.coverImg?e("img",{src:s.coverImg,alt:""}):e("img",{src:"http://typescript-vue.oss-cn-beijing.aliyuncs.com/vue-marker/5f81cca3f3bf7a0e1ebaf885.png",alt:""}),e("div",{className:"hover-item",onClick:()=>t(s.id),children:e(d,{size:"large",type:"primary",children:"\u4F7F\u7528\u8BE5\u6A21\u7248\u521B\u5EFA"})})]}),e(G,{title:s.title,description:a("div",{className:"description-detail",children:[a("span",{onClick:()=>o(s.id),children:["\u7F16\u8F91",e(w,{})]}),e(L,{type:"vertical"}),a("span",{onClick:()=>u(s.id),children:["\u5220\u9664",e(W,{})]})]})})]})},s.id))})})};const U=()=>{const i=k(D),{mutateAsync:c,isLoading:l}=M(),{logout:r}=j(),t=m(),o=async()=>{if(i.isLogin){const n=await c({title:"\u672A\u547D\u540D\u4F5C\u54C1",desc:"\u672A\u547D\u540D\u4F5C\u54C1",coverImg:""});t(`/editor/${n.id}`)}else t("/login")},u=a(g,{children:[e(g.Item,{onClick:()=>r(),children:"\u767B\u51FA"},1),e(g.Item,{onClick:()=>window.open("https://github.com/GongJS/editor-react"),children:"Github"},2)]});return a("div",{className:"user-profile",children:[!i.isLogin&&e(d,{type:"primary",onClick:()=>t("/login"),children:"\u767B\u5F55"}),a("div",{className:"user-operation",children:[e(d,{type:"primary",shape:"round",onClick:o,loading:l,children:"\u521B\u5EFA\u8BBE\u8BA1"}),e(I.Button,{overlay:u,children:e(C,{to:"/setting",children:i.data.nickName})})]})]})};const{Header:_,Footer:q,Content:K}=N,Y=()=>{var v;const i=k(D),[c,l]=f.useState(0),[r]=f.useState(4),{data:t,isLoading:o,fetchNextPage:u,hasNextPage:s}=z(),{data:n,isLoading:B}=T({pageIndex:c,pageSize:r}),b=p=>{l(p-1)};return e("div",{className:"homepage-container",children:a(N,{style:{background:"#fff"},children:[a(_,{className:"header",children:[a("div",{className:"page-title",children:[e(C,{to:"/",children:e("img",{alt:"logo",src:H,className:"logo-img"})}),"\u4E50\u9AD8"]}),e(U,{})]}),a(K,{className:"home-layout",children:[a("div",{className:"content-container",children:[a("div",{className:"hot-title",children:[e("h2",{className:"hot-template",children:"\u70ED\u95E8\u6D77\u62A5"}),e("p",{children:"\u53EA\u9700\u66FF\u6362\u6587\u5B57\u548C\u56FE\u7247\uFF0C\u4E00\u952E\u81EA\u52A8\u751F\u6210H5"})]}),o?e(A,{}):e(R,{list:(t==null?void 0:t.pages.map(p=>p.list).flat())||[]}),e("div",{children:s&&e(d,{type:"primary",size:"large",onClick:()=>u(),children:"\u52A0\u8F7D\u66F4\u591A"})})]}),i.isLogin&&((v=n==null?void 0:n.list)==null?void 0:v.length)>0&&a("div",{className:"my-works",children:[e("div",{className:"content-title",children:e("h2",{children:"\u6211\u7684\u4F5C\u54C1"})}),B?e(A,{}):a(S,{children:[e(J,{list:n.list}),e($,{onChange:b,total:n.pageTotal,defaultPageSize:r})]})]})]}),e(q,{children:"JS \xA9 Lego"})]})})};export{Y as default};
